<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.luomu32.mybatis.test.UserDao">

    <resultMap id="User" type="xyz.luomu32.mybatis.test.User">
        <result column="id" property="id"></result>
        <result column="username" property="username"/>
        <!--        <result column="password" property="password"/>-->
        <!--        <result column="birthday" property="birthday"/>-->
        <!--        <result column="role_id" property="roleId"/>-->
        <!--        <result column="email" property="email"/>-->
    </resultMap>

    <insert id="create" parameterType="xyz.luomu32.mybatis.test.User">
        insert into t_user(username)values(#{username})
    </insert>

    <update id="update" parameterType="xyz.luomu32.mybatis.test.User">
        update t_user
        <set>
            <if test="username != null">username = #{username}</if>
        </set>
        where id=#{id}
    </update>

    <select id="findById" parameterType="long" resultMap="User">
        select * from t_user where id=#{id}
    </select>

    <select id="findByUsername" parameterType="String" resultMap="User">
        select id,username from t_user where username=#{username}
    </select>

    <select id="findAll" resultMap="User">
        select id,username from t_user
        <where>
            <if test="id != null">id=#{id}</if>
            <if test="username !=null">username=#{username}</if>
        </where>
    </select>


</mapper>